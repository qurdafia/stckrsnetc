{% extends "base.html" %}
{% block title %}Verify Phone{% endblock %}
{% block content %}
<div class="verify">
  <p>&nbsp;</p>
  <h2>Please verify your mobile number</h2>
  <p>&nbsp;</p>
  <form role="form" method="POST">
    {% csrf_token %}

    {{ form.non_field_errors }}
    {{ form.phone_number.errors }}
    {{ form.via.errors }}

    <div class="row">
      <input type="tel" id="intl_phone_number" class="form-control" />
      {{ form.via }}
      <input type="submit" value="Request Verification" class="btn btn-info btn-block">
    </div>
    <div class="row" style="margin-top: 10px;">
      <p style="padding:0;">I consent:
      <input style="width: 30px; height: 12px;" type="checkbox" id="opt_in" name="opt_in" value="" onclick="enablePhone()">
      </p>
    </div>

  </form>
</div>

<!-- MODAL -->
<div class="container">
  <!-- Modal -->
  <div class="modal fade" id="myModal" role="dialog">
    <div class="modal-dialog">

      <!-- Modal content-->
      <div class="modal-content">
        <div class="modal-header">
          <h4 class="modal-title">Hi, {{ user.first_name }}!</h4>
          <span style="color: red;">[MUST READ]</span>
        </div>
        <div class="modal-body">
          <p>We are very happy that you're here.</p>
          <p>As your order request will be fulfilled via LBC Cash-on-Delivery option, we are committed to trust our customers.</p>
          <p><strong>POLICY AGREEMENT</strong></p>
          <p>By entering your mobile number, you agree and consent that you will be recieving an SMS message from us. Your SMS opt-in will
            only be used within this speficic transaction
            <strong>Don't forget to enter the VERIFICATION TOKEN that will be sent out to your mobile number</strong> later.</p>
          <p>Once you post your order, it will be processed automatically.</p>
          <p>To save time, make sure that you have your graphic design file ready, the dimensions (in inches), and the quantity that you want.</p>
          <p>We recommend that you upload a high resolution image of your file to achieve a better quality printout.</p>
          <p>Contact us via <a href="https://www.facebook.com/unrestphshop">Facebook</a> if you have any other queries.</p>
          <p>Thank you.</p>
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-default" data-dismiss="modal">I Agree</button>
        </div>
      </div>

    </div>
  </div>
  <!-- END MODAL -->

<script>
//* MODAL SCRIPT
$(window).on('load', function() {
  $('#myModal').modal('show');
});
</script>

<script>
  const phoneInputField = document.querySelector("#intl_phone_number");
  const phoneInput = window.intlTelInput(phoneInputField, {
    separateDialCode: true,
    hiddenInput: "phone_number",
    utilsScript: "https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/16.0.11/js/utils.js"
  });

  function enablePhone() {
    x = document.getElementById('intl_phone_number');
    x.disabled = true;
    y = document.getElementById('opt_in');
    if (y.checked == true) {
        x.disabled = false;
    }
  }

  enablePhone();

</script>
{% endblock %}
